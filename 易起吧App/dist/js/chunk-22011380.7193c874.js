(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22011380"],{"4f1d":function(t,s,n){"use strict";n.r(s);var a=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"mySeek"},[n("div",{staticClass:"seekHeard"},[n("span",{staticClass:"iconfont icon-arrow-fine-up-copy",on:{click:t.goBack}}),n("van-search",{attrs:{placeholder:"歌名、歌手、歌单"},on:{input:t.ff_input},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}})],1),n("div",{staticClass:"his"},[n("van-skeleton",{attrs:{title:"","row-width":"100%",loading:t.loading}},t._l(t.his,(function(s,a){return n("span",{key:a,staticClass:"hisText",on:{touchstart:function(s){return t.ff_start(a)},touchend:t.ff_end,click:function(n){return n.preventDefault(),t.ff_huoq(s)}}},[t._v(t._s(s))])})),0)],1),n("div",{staticClass:"hots"},[t._m(0),n("div",{staticClass:"hotList"},t._l(t.hotList,(function(s,a){return n("div",{key:a,staticClass:"hotItems",on:{click:function(n){return t.seekItem(s.searchWord)}}},[n("van-skeleton",{attrs:{title:"","row-width":"100%",loading:t.loading}},[n("span",{staticClass:"seartitle",class:a<=2?"attartitle":""},[t._v(t._s(a+1))]),n("span",{staticClass:"searchWord",class:a<=2?"attarWord":""},[t._v(t._s(s.searchWord))]),s.score>=95e4?n("span",{staticClass:"a1 hotIcon"},[t._v("HOT")]):t._e(),s.iconType>=1?n("span",{staticClass:"a1 iconfont icon-shangsheng"}):t._e()])],1)})),0)]),n("transition",{attrs:{"enter-active-class":"animate__animated animate__bounceInRight","leave-active-class":"animate__animated animate__bounceOutRight"}},[t.isSearch?n("ul",{staticClass:"search"},[n("li",{staticClass:"searchHeard"},[t._v(" 搜索“"+t._s(t.value)+"” ")]),t._l(t.newList,(function(s,a){return n("li",{key:a,staticClass:"searchItem",on:{click:function(n){return t.ff_danSong(s.id)}}},[n("van-icon",{attrs:{name:"search",color:"#babbbe"}}),n("span",{staticClass:"itemName"},[t._v(t._s(s.name))])],1)}))],2):t._e()])],1)},i=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"hotHeard"},[n("span",[t._v("热搜榜")])])}],e=(n("4160"),n("fb6a"),n("a434"),n("b0c0"),n("159b"),n("8348"),{name:"Seek",data:function(){return{value:"",hotList:[],input:null,newList:[],isSearch:!1,his:[],isDansong:!1,isStart:!1,clocks:null,nums:0,loading:!0}},computed:{queue:function(){return this.$store.state.queue},music:function(){return this.$store.state.song}},created:function(){var t=this;this.$toast.loading({message:"加载中",forbidClick:!0,loadingType:"spinner"});var s=JSON.parse(sessionStorage.getItem("his"));s&&(this.his=s),this.axios({url:"/search/hot/detail"}).then((function(s){t.hotList=s.data.data,t.$toast.clear(),console.log(t.hotList),setTimeout((function(){t.loading=!1}),500)})).catch((function(t){console.log(t)}))},methods:{ff_input:function(){var t=this;clearTimeout(this.input),this.value?this.input=setTimeout((function(){t.ff_huoq(t.value)}),200):this.isSearch=!1},ff_danSong:function(t){var s=this;this.isDansong=!0,this.axios({url:"/song/detail",method:"GET",params:{ids:t}}).then((function(t){if(console.log(t),200==t.data.code){var n={songName:t.data.songs[0].name,songId:t.data.songs[0].id,songUrl:t.data.songs[0].al.picUrl,autName:t.data.songs[0].ar[0].name,songBrief:t.data.songs[0].al.name};s.ff_songs(n.songId,n.songName,n.songUrl),s.isSearch=!1}})).catch((function(t){console.log(t)}))},ff_songs:function(t,s,n,a,i){var e=this,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];console.log(t,s,n),this.axios({url:"/song/url",method:"GET",params:{id:t}}).then((function(c){if(console.log(c),200==c.data.code){e.isDansong=!1;var r={};if(r.name=s,r.url=c.data.data[0].url,r.imgUrl=n,r.id=t,r.isFlash=!0,r.isPlay=!0,e.musicObj=r,e.$store.dispatch("gaiMusic",e.musicObj),console.log(e.music),o){var u=!0;if(e.queue.forEach((function(o,c){o.songId==t&&(u=!1,e.queue.splice(c,1),e.queue.unshift({songId:t,songName:s,songUrl:n,autName:a,songBrief:i}))})),u){e.queue.unshift({songId:t,songName:s,songUrl:n,autName:a,songBrief:i});var l=e.queue.slice(0,30);e.$store.dispatch("gaiQueue",l)}sessionStorage.setItem("queue",JSON.stringify(e.queue)),e.isSingle=!1}}})).catch((function(t){console.log(t)}))},goBack:function(){this.$router.go(-1)},ff_huoq:function(t){var s=this;this.value=t,this.axios({url:"/search",params:{keywords:t}}).then((function(t){200==t.data.code&&(s.newList=t.data.result.songs.splice(0,10),s.isSearch=!0,console.log(s.newList))})).catch((function(t){console.log(t)}))},ff_start:function(t){var s=this;this.clocks=setInterval((function(){s.nums++,s.nums>=10&&s.nums<=15&&s.ff_rovemItem(t)}),100)},ff_end:function(){clearInterval(this.clocks),this.nums=0},ff_rovemItem:function(t){this.his.splice(t,1),sessionStorage.setItem("his",JSON.stringify(this.his)),clearInterval(this.clocks),this.nums=0},seekItem:function(t){console.log(t),this.ff_huoq(t)}},watch:{isDansong:function(t,s){if(t){for(var n=0;n<this.his.length;n++)if(this.his[n]==this.value)return;this.his.unshift(this.value),this.his=this.his.slice(0,10),sessionStorage.setItem("his",JSON.stringify(this.his)),this.value=""}}}}),o=e,c=n("2877"),r=Object(c["a"])(o,a,i,!1,null,"43cdc76a",null);s["default"]=r.exports},8348:function(t,s,n){},b0c0:function(t,s,n){var a=n("83ab"),i=n("9bf2").f,e=Function.prototype,o=e.toString,c=/^\s*function ([^ (]*)/,r="name";a&&!(r in e)&&i(e,r,{configurable:!0,get:function(){try{return o.call(this).match(c)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-22011380.7193c874.js.map