(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37b8682a","chunk-e6e346ea"],{"17f7":function(t,a,s){},"81a8":function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"myVideo"},[s("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(a){t.isLoading=a},expression:"isLoading"}},[s("div",{staticClass:"videoList"},t._l(t.nowMvData,(function(a,i){return s("div",{key:i,staticClass:"box",on:{click:function(s){return t.goPack(a.id)}}},[s("van-skeleton",{attrs:{round:!0,"avatar-shape":"square",title:"","row-width":"48%",loading:t.loading}},[s("div",{staticClass:"bodys"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.cover,expression:"item.cover"}],staticClass:"img_01"}),s("div",{staticClass:"moBox"}),s("span",{staticClass:"yan"},[t._v("MV")]),s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.cover,expression:"item.cover"}],staticClass:"img_02"})])]),s("van-skeleton",{attrs:{round:!0,"avatar-shape":"square",title:"",row:4,loading:t.loading}},[s("div",{staticClass:"bottomText"},[s("p",[s("span",[t._v(t._s(a.name))]),s("span",[t._v("-"+t._s(a.artistName))])]),s("p",[s("span",{staticClass:"icon-sanjiaoxing iconfont"},[t._v("99.5万")]),s("span",{staticClass:"icon-zan iconfont"},[t._v("99.5万")])])])])],1)})),0)])],1)},n=[],e=(s("fb6a"),s("cb62"),{name:"Video",data:function(){return{newMvData:[],nowMvData:[],isLoading:!1,stats:0,end:6,loading:!0}},created:function(){var t=this;this.$toast.loading({message:"加载中",forbidClick:!0,loadingType:"spinner"}),this.axios({url:"/mv/first"}).then((function(a){200==a.data.code&&(t.$toast.clear(),t.newMvData=a.data.data,t.nowMvData=t.newMvData.slice(t.stats,t.end),console.log(t.nowMvData),setTimeout((function(){t.loading=!1}),500))})).catch((function(t){console.log(t)}))},methods:{onRefresh:function(){var t=this;this.loading=!0,setTimeout((function(){t.end=t.end>=30?0:t.end,t.stats=t.end,t.end=t.end+6,t.nowMvData=t.newMvData.slice(t.stats,t.end),t.$toast("刷新成功"),t.isLoading=!1,t.loading=!1}),1e3)},goPack:function(t){this.$router.push({name:"DetailsMv",query:{id:t}})}}}),o=e,c=s("2877"),r=Object(c["a"])(o,i,n,!1,null,"022cc14b",null);a["default"]=r.exports},b0c0:function(t,a,s){var i=s("83ab"),n=s("9bf2").f,e=Function.prototype,o=e.toString,c=/^\s*function ([^ (]*)/,r="name";i&&!(r in e)&&n(e,r,{configurable:!0,get:function(){try{return o.call(this).match(c)[1]}catch(t){return""}}})},cb62:function(t,a,s){},d81d:function(t,a,s){"use strict";var i=s("23e7"),n=s("b727").map,e=s("1dde"),o=s("ae40"),c=e("map"),r=o("map");i({target:"Array",proto:!0,forced:!c||!r},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},f522:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"myDetailsMv"},[s("van-sticky",[s("van-nav-bar",{attrs:{title:"MV"},scopedSlots:t._u([{key:"left",fn:function(){return[s("span",{staticClass:"iconfont icon-arrow-fine-up-copy",on:{click:function(a){return a.stopPropagation(),t.onClickLeft(a)}}})]},proxy:!0}])}),s("video",{ref:"myVideos",staticClass:"myVideos",attrs:{autoplay:"",controls:"",loop:"",src:t.mvObj.url}})],1),s("van-tabs",{attrs:{sticky:""},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},t._l(t.dataTile,(function(a,i){return s("van-tab",{key:i,attrs:{title:1==i?a+"("+t.mvAute.commentCount+")":a}},[0==t.active?s("div",{staticClass:"artist"},[s("div",{staticClass:"artistOne"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.mvAute.cover,expression:"mvAute.cover"}]}),s("p",{staticClass:"oneText"},[s("span",[t._v(t._s(t.mvAute.artistName))]),s("span",[t._v(t._s(t.mvAute.subCount)+"关注")])]),s("span",{staticClass:"icon-jiahao iconfont"},[t._v("关注")])]),s("div",{staticClass:"artistTwo"},[t._v(" "+t._s(t.mvAute.desc)+" ")]),s("div",{staticClass:"artistThree"},[s("span",[t._v(t._s(t.mvAute.playCount)+"播放")]),s("span",[t._v(t._s(t.mvAute.publishTime))])]),s("div",{staticClass:"artistFour"},[t._v(t._s(t.mvAute.name))]),s("div",{staticClass:"artisFive"},[s("span",{staticClass:"iconfont icon-zan1",on:{click:t.zan1}},[t._v(t._s(t.mvAute.shareCount))]),s("span",{staticClass:"iconfont icon-shoucang2",on:{click:t.ff_collect}},[t._v("收藏")]),s("span",{staticClass:"iconfont icon-zhuanqu-04",on:{click:function(a){t.showShare=!0}}},[t._v("分享")])]),s("div",{staticClass:"simil"},[s("div",{staticClass:"similHeard"},[t._v("相关Mv")]),t._l(t.mvList,(function(a,i){return s("div",{key:i,staticClass:"similItem",on:{click:function(s){return t.genItem(a.id)}}},[s("div",{staticClass:"itemHeard"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.cover,expression:"item.cover"}]}),s("p",{staticClass:"itemP"},[s("span",{staticClass:"icon-bofangjian1 iconfont"}),s("span",[t._v(t._s(t._f("ff_time")(a.duration)))]),s("span",[t._v(t._s(t._f("ff_sum")(a.playCount)))])])]),s("div",{staticClass:"itemBodys"},[s("p",[s("span",[t._v(t._s(a.name))]),s("span",[t._v("-"+t._s(a.artistName))])]),s("p",[t._v("来自:"+t._s(a.alg)+"专辑")])])])}))],2)]):t._e(),1==t.active?s("div",{staticClass:"pinglun"},[s("div",{staticClass:"pinglunHeard"},[t._v("全部评论"),s("span",[t._v(t._s(t.mvAute.commentCount))])]),t._l(t.punList,(function(a,i){return s("div",{key:i,staticClass:"pinglunItem"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.user.avatarUrl,expression:"item.user.avatarUrl"}]}),s("div",{staticClass:"ItemBodys"},[s("p",[s("span",[t._v(t._s(a.user.nickname))]),s("span",{staticClass:"iconfont icon-zan",on:{click:function(s){return t.ff_zan(a)}}},[t._v(t._s(a.likedCount))])]),s("p",[t._v(t._s(t._f("ff_getdate")(a.time)))]),s("p",[t._v(" "+t._s(a.content)+" ")])])])}))],2):t._e()])})),1),s("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},on:{select:t.onSelect},model:{value:t.showShare,callback:function(a){t.showShare=a},expression:"showShare"}})],1)},n=[],e=(s("99af"),s("d81d"),s("b0c0"),s("17f7"),s("81a8")),o={components:{Video:e["default"]},name:"DetailsMv",data:function(){return{ids:null,mvObj:{},dataTile:["详情","评论"],active:0,mvAute:{},mvList:[],punList:[],showShare:!1,options:[{name:"微信",icon:"wechat"},{name:"微博",icon:"weibo"},{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"}]}},created:function(){this.ff_isFlash(),this.ids=this.$route.query.id,this.ff_url(),this.ff_detail(),this.ff_leisMv()},methods:{ff_detail:function(){var t=this;this.axios({url:"/mv/detail",params:{mvid:this.ids}}).then((function(a){200==a.data.code&&(t.mvAute=a.data.data,console.log(t.mvAute))})).catch((function(t){console.log(t)}))},ff_url:function(){var t=this;this.axios({url:"/mv/url",params:{id:this.ids}}).then((function(a){200==a.data.code&&(t.mvObj=a.data.data)})).catch((function(t){console.log(t)}))},ff_leisMv:function(){var t=this;this.axios({url:"/simi/mv",params:{mvid:this.ids}}).then((function(a){200==a.data.code&&(t.mvList=[],a.data.mvs.map((function(a){t.mvList.push(a)})),console.log(t.mvList))})).catch((function(t){console.log(t)}))},genItem:function(t){console.log,this.ids=t,this.ff_url(),this.ff_detail(),this.ff_leisMv()},ff_pinlun:function(){var t=this;this.axios({url:"/comment/mv",params:{id:this.ids}}).then((function(a){200==a.data.code&&(t.punList=[],a.data.comments.map((function(a){t.punList.push(a)})),console.log("冲",t.punList),t.$toast.clear())})).catch((function(t){console.log(t)}))},ff_zan:function(t){var a=localStorage.getItem("useId");a?t.likedCount++:(this.$router.push({name:"Login"}),this.$toast("请登录"))},zan1:function(){var t=localStorage.getItem("useId");t?this.mvAute.shareCount++:(this.$router.push({name:"Login"}),this.$toast("请登录"))},ff_collect:function(){var t=localStorage.getItem("useId");t?this.axios({url:"/mv/sub",params:{mvid:this.ids,t:1}}).then((function(t){console.log(t)})).catch((function(t){console.log(t)})):(this.$router.push({name:"Login"}),this.$toast("请登录"))},onSelect:function(t){this.$toast(t.name),this.showShare=!1},onClickLeft:function(){this.$router.go(-1)},ff_isFlash:function(){this.music.myAudio&&(this.ff_isPlay(!1),this.music.myAudio.pause(),this.$store.commit("gaiIsflash",!1))},ff_isPlay:function(t){this.$store.dispatch("gaiPaly",t)}},watch:{mvObj:function(t,a){},active:function(t,a){1==t&&(this.$toast("加载中..."),this.ff_pinlun())}},filters:{ff_time:function(t){var a=(t-0)/1e3,s=a/60,i=parseInt(s);i<10&&(i="0"+i);var n=a%60,e=Math.floor(n);e<10&&(e="0"+e);var o="".concat(i,":").concat(e);return o},ff_sum:function(t){var a="";return a="".concat(Math.floor((t-0)/1e4),"万"),a},ff_getdate:function(t){var a=new Date(t),s=a.getFullYear(),i=a.getMonth()+1,n=a.getDate();return s+"-"+(i<10?"0"+i:i)+"-"+(n<10?"0"+n:n)+" "+a.toTimeString().substr(0,8)}},computed:{music:function(){return this.$store.state.song}}},c=o,r=s("2877"),l=Object(r["a"])(c,i,n,!1,null,"baa77178",null);a["default"]=l.exports}}]);
//# sourceMappingURL=chunk-37b8682a.f8ce5784.js.map